<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil - GelaTec</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: #f5f5f5;
      color: #333;
      padding-bottom: 80px;
    }

    .hidden {
      display: none !important;
    }

    /* HEADER */
    .header {
      background: linear-gradient(135deg, #ff0080, #ff6b9d);
      color: white;
      padding: 15px 20px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .logo-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 5px;
    }

    .logo-image {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: white;
    }

    .logo-container h1 {
      font-size: 24px;
      font-weight: bold;
    }

    /* CONTAINER PRINCIPAL */
    .page-container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }

    .page-title {
      text-align: center;
      margin-bottom: 20px;
      color: #ff0080;
    }

    /* SEÇÃO DE LOGIN */
    .login-form {
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: #555;
    }

    .form-control {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
    }

    .form-control:focus {
      border-color: #ff0080;
      outline: none;
    }

    .login-btn {
      width: 100%;
      background: linear-gradient(135deg, #ff0080, #ff6b9d);
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 15px;
    }

    .register-link {
      text-align: center;
      color: #666;
    }

    .register-link a {
      color: #ff0080;
      text-decoration: none;
      font-weight: 600;
    }

    /* SEÇÃO DE PERFIL */
    .user-info {
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .user-avatar {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #ff0080, #ff6b9d);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      margin: 0 auto 15px;
    }

    .user-name {
      text-align: center;
      margin-bottom: 5px;
      color: #333;
    }

    .user-email {
      text-align: center;
      color: #666;
      margin-bottom: 20px;
    }

    .profile-item {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 16px;
      cursor: pointer;
    }

    .profile-item-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logout-btn {
      width: 100%;
      background: #f8f9fa;
      color: #ff0080;
      border: 2px solid #ff0080;
      padding: 12px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 20px;
    }

    /* BOTÃO EDITAR */
    .edit-profile-btn {
      background: #f8f9fa;
      color: #ff0080;
      border: 2px solid #ff0080;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      margin: 10px auto;
      display: block;
    }

    /* MODAL */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: white;
      width: 90%;
      max-width: 500px;
      border-radius: 15px;
      padding: 25px;
    }

    .modal-title {
      color: #ff0080;
      margin-bottom: 20px;
      text-align: center;
    }

    .modal-buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .modal-btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }

    .btn-primary {
      background: linear-gradient(135deg, #ff0080, #ff6b9d);
      color: white;
    }

    .btn-secondary {
      background: #f8f9fa;
      color: #666;
      border: 2px solid #e0e0e0;
    }

    /* ALERTAS */
    .alert {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }

    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .alert-danger {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    /* NAVEGAÇÃO INFERIOR */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: #666;
      font-size: 12px;
    }

    .nav-item.active {
      color: #ff0080;
    }

    .nav-icon {
      font-size: 20px;
      margin-bottom: 2px;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo-container">
      <div class="logo-image"></div>
      <h1>GelaTec</h1>
    </div>
    <p>Meu Perfil</p>
  </header>

  <div class="page-container">
    <h1 class="page-title">Meu Perfil 👤</h1>

    <!-- Área de alertas -->
    <div id="alertMessage" class="alert"></div>

    <!-- SEÇÃO DE LOGIN -->
    <div id="login-section">
      <div class="login-form">
        <h2 style="color: #ff0080; margin-bottom: 20px; text-align: center;">Faça seu Login</h2>

        <div class="form-group">
          <label for="email">E-mail</label>
          <input type="email" id="email" class="form-control" placeholder="seu@email.com">
        </div>
        
        <div class="form-group">
          <label for="password">Senha</label>
          <input type="password" id="password" class="form-control" placeholder="Sua senha">
        </div>
        
        <button class="login-btn" onclick="login()">Entrar</button>

        <div class="register-link">
          Não tem conta? <a href="#">Cadastre-se</a>
        </div>
      </div>
    </div>

    <!-- SEÇÃO DE PERFIL -->
    <div id="profile-section" class="hidden">
      <div class="user-info">
        <div class="user-avatar">👤</div>
        <h2 class="user-name" id="user-name">Maria Silva</h2>
        <p class="user-email" id="user-email">maria.silva@email.com</p>

        <!-- Botão para editar perfil -->
        <button class="edit-profile-btn" onclick="openEditModal()">Editar Perfil</button>

        <!-- Itens do perfil -->
        <div class="profile-item">
          <div class="profile-item-content">
            <span style="font-weight: 600;">Meus Pedidos</span>
            <span style="color: #ff0080;">›</span>
          </div>
        </div>

        <div class="profile-item">
          <div class="profile-item-content">
            <span style="font-weight: 600;" id="user-address">Endereço: Não cadastrado</span>
            <span style="color: #ff0080;">›</span>
          </div>
        </div>

        <div class="profile-item">
          <div class="profile-item-content">
            <span style="font-weight: 600;" id="user-cashback">Cashback: R$ 0,00</span>
            <span style="color: #ff0080;">›</span>
          </div>
        </div>

        <button class="logout-btn" onclick="logout()">Sair da Conta</button>
      </div>
    </div>
  </div>

  <!-- MODAL DE EDIÇÃO -->
  <div id="editProfileModal" class="modal">
    <div class="modal-content">
      <h2 class="modal-title">Editar Perfil</h2>
      <form id="profileForm">
        <div class="form-group">
          <label for="editName">Nome</label>
          <input type="text" id="editName" class="form-control" required>
        </div>
        
        <div class="form-group">
          <label for="editEmail">E-mail</label>
          <input type="email" id="editEmail" class="form-control" required>
        </div>
        
        <div class="form-group">
          <label for="editAddress">Endereço</label>
          <input type="text" id="editAddress" class="form-control" placeholder="Digite seu endereço completo">
        </div>
        
        <div class="form-group">
          <label for="editCashback">Cashback (R$)</label>
          <input type="number" id="editCashback" class="form-control" min="0" step="0.01" placeholder="0.00">
        </div>
        
        <div class="modal-buttons">
          <button type="button" class="modal-btn btn-secondary" onclick="closeEditModal()">Cancelar</button>
          <button type="submit" class="modal-btn btn-primary">Salvar Alterações</button>
        </div>
      </form>
    </div>
  </div>

  <!-- NAVEGAÇÃO -->
  <nav class="bottom-nav">
    <a href="index.html" class="nav-item">
      <span class="nav-icon">🏠</span>
      <span>Início</span>
    </a>
    <a href="p2.html" class="nav-item">
      <span class="nav-icon">📋</span>
      <span>Cardápio</span>
    </a>
    <a href="p3.html" class="nav-item active">
      <span class="nav-icon">👤</span>
      <span>Perfil</span>
    </a>
    <a href="carrinho.html" class="nav-item">
      <span class="nav-icon">🛒</span>
      <span>Carrinho</span>
    </a>
  </nav>

  <script>
    // Dados do usuário
    let userProfile = {
      name: "Maria Silva",
      email: "maria.silva@email.com",
      address: "",
      cashback: 0,
      loggedIn: false
    };

    // Mostrar alerta
    function showAlert(message, type) {
      const alertElement = document.getElementById('alertMessage');
      alertElement.textContent = message;
      alertElement.className = `alert alert-${type}`;
      alertElement.style.display = 'block';
      
      setTimeout(() => {
        alertElement.style.display = 'none';
      }, 4000);
    }

    // Carregar perfil do localStorage
    function loadProfile() {
      const savedProfile = localStorage.getItem('userProfile');
      if (savedProfile) {
        userProfile = JSON.parse(savedProfile);
        updateProfileDisplay();
        
        // Se estava logado, mostrar perfil
        if (userProfile.loggedIn) {
          showProfileSection();
        }
      }
    }

    // Atualizar exibição do perfil
    function updateProfileDisplay() {
      document.getElementById('user-name').textContent = userProfile.name;
      document.getElementById('user-email').textContent = userProfile.email;
      
      // Endereço
      const addressElement = document.getElementById('user-address');
      if (userProfile.address && userProfile.address.trim() !== '') {
        addressElement.textContent = `Endereço: ${userProfile.address}`;
      } else {
        addressElement.textContent = 'Endereço: Não cadastrado';
      }
      
      // Cashback
      document.getElementById('user-cashback').textContent = 
        `Cashback: R$ ${userProfile.cashback.toFixed(2).replace('.', ',')}`;
    }

    // Salvar perfil no localStorage
    function saveProfile() {
      localStorage.setItem('userProfile', JSON.stringify(userProfile));
    }

    // Login
    function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      if (email && password) {
        // Atualizar email no perfil
        userProfile.email = email;
        userProfile.loggedIn = true;
        
        saveProfile();
        updateProfileDisplay();
        showProfileSection();
        
        showAlert('Login realizado com sucesso!', 'success');
      } else {
        showAlert('Por favor, preencha todos os campos!', 'danger');
      }
    }

    // Mostrar seção do perfil
    function showProfileSection() {
      document.getElementById('login-section').classList.add('hidden');
      document.getElementById('profile-section').classList.remove('hidden');
    }

    // Logout
    function logout() {
      if (confirm('Tem certeza que deseja sair da conta?')) {
        userProfile.loggedIn = false;
        saveProfile();
        
        document.getElementById('login-section').classList.remove('hidden');
        document.getElementById('profile-section').classList.add('hidden');
        document.getElementById('email').value = '';
        document.getElementById('password').value = '';
        
        showAlert('Você saiu da conta.', 'success');
      }
    }

    // Modal de edição
    function openEditModal() {
      document.getElementById('editProfileModal').style.display = 'flex';
      document.getElementById('editName').value = userProfile.name;
      document.getElementById('editEmail').value = userProfile.email;
      document.getElementById('editAddress').value = userProfile.address;
      document.getElementById('editCashback').value = userProfile.cashback;
    }

    function closeEditModal() {
      document.getElementById('editProfileModal').style.display = 'none';
    }

    // Event Listeners
    document.addEventListener('DOMContentLoaded', function() {
      loadProfile();
      
      // Formulário de edição
      document.getElementById('profileForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        userProfile.name = document.getElementById('editName').value;
        userProfile.email = document.getElementById('editEmail').value;
        userProfile.address = document.getElementById('editAddress').value;
        userProfile.cashback = parseFloat(document.getElementById('editCashback').value) || 0;
        
        saveProfile();
        updateProfileDisplay();
        closeEditModal();
        
        showAlert('Perfil atualizado com sucesso!', 'success');
      });
      
      // Fechar modal ao clicar fora
      window.addEventListener('click', function(e) {
        const modal = document.getElementById('editProfileModal');
        if (e.target === modal) {
          closeEditModal();
        }
      });
    });
  </script>
</body>
</html>
